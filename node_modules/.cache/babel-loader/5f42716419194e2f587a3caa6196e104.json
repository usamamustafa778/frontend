{"ast":null,"code":"var _jsxFileName = \"/Users/usamabhatti/Documents/amazona/frontend/src/screens/DashboardScreen.js\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport Chart from 'react-google-charts';\nimport React, { useContext, useEffect, useReducer } from 'react';\nimport Card from 'react-bootstrap/Card';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport { Store } from '../Store';\nimport { getError } from '../utils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'FETCH_REQUEST':\n      return { ...state,\n        loading: true\n      };\n\n    case 'FETCH_SUCCESS':\n      return { ...state,\n        summary: action.payload,\n        loading: false\n      };\n\n    case 'FETCH_FAIL':\n      return { ...state,\n        loading: false,\n        error: action.payload\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default function DashboardScreen() {\n  _s();\n\n  const [{\n    loading,\n    summary,\n    error\n  }, dispatch] = useReducer(reducer, {\n    loading: true,\n    error: ''\n  });\n  const {\n    state\n  } = useContext(Store);\n  const {\n    userInfo\n  } = state;\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const {\n          data\n        } = await axios.get('/api/orders/summary', {\n          headers: {\n            Authorization: `Bearer ${userInfo.token}`\n          }\n        });\n        dispatch({\n          type: 'FETCH_SUCCESS',\n          payload: data\n        });\n      } catch (err) {\n        dispatch({\n          type: 'FETCH_FAIL',\n          payload: getError(err)\n        });\n      }\n    };\n\n    fetchData();\n  }, [userInfo]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), loading ? /*#__PURE__*/_jsxDEV(LoadingBox, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 17\n    }, this) : error ? /*#__PURE__*/_jsxDEV(MessageBox, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          md: 4,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(Card.Body, {\n              children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n                children: summary.users && summary.users[0] ? summary.users[0].numUsers : 0\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 69,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n                children: \" Users\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 4,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(Card.Body, {\n              children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n                children: summary.orders && summary.users[0] ? summary.orders[0].numOrders : 0\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 81,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n                children: \" Orders \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          md: 4,\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: /*#__PURE__*/_jsxDEV(Card.Body, {\n              children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n                children: [\"$\", summary.orders && summary.users[0] ? summary.orders[0].totalSales.toFixed(2) : 0]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n                children: \" Orders \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 99,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"my-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Sales\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 25\n        }, this), summary.dailyOrders.length === 0 ? /*#__PURE__*/_jsxDEV(MessageBox, {\n          children: \"No Sale\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(Chart, {\n          width: \"100%\",\n          height: \"400px\",\n          chartType: \"AreaChart\",\n          loader: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Loading Chart...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 41\n          }, this),\n          data: [['Date', 'Sales'], ...summary.dailyOrders.map(x => [x._id, x.sales])]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"my-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Categories\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 25\n        }, this), summary.productCategories.length === 0 ? /*#__PURE__*/_jsxDEV(MessageBox, {\n          children: \"No Category\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(Chart, {\n          width: \"100%\",\n          height: \"400px\",\n          chartType: \"PieChart\",\n          loader: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: \"Loading Chart...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 41\n          }, this),\n          data: [['Category', 'Products'], ...summary.productCategories.map(x => [x._id, x.count])]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n}\n\n_s(DashboardScreen, \"RpFZUzlElAdLB4PYYShi4yYbKrY=\");\n\n_c = DashboardScreen;\n\nvar _c;\n\n$RefreshReg$(_c, \"DashboardScreen\");","map":{"version":3,"names":["axios","Chart","React","useContext","useEffect","useReducer","Card","Col","Row","LoadingBox","MessageBox","Store","getError","reducer","state","action","type","loading","summary","payload","error","DashboardScreen","dispatch","userInfo","fetchData","data","get","headers","Authorization","token","err","users","numUsers","orders","numOrders","totalSales","toFixed","dailyOrders","length","map","x","_id","sales","productCategories","count"],"sources":["/Users/usamabhatti/Documents/amazona/frontend/src/screens/DashboardScreen.js"],"sourcesContent":["import axios from 'axios';\nimport Chart from 'react-google-charts';\nimport React, { useContext, useEffect, useReducer } from 'react'\nimport Card from 'react-bootstrap/Card';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport { Store } from '../Store';\nimport { getError } from '../utils';\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case 'FETCH_REQUEST':\n            return { ...state, loading: true };\n        case 'FETCH_SUCCESS':\n            return {\n                ...state,\n                summary: action.payload,\n                loading: false,\n            };\n        case 'FETCH_FAIL':\n            return { ...state, loading: false, error: action.payload };\n\n        default:\n            return state;\n    }\n};\n\nexport default function DashboardScreen() {\n    const [{ loading, summary, error }, dispatch] = useReducer(reducer, {\n        loading: true,\n        error: '',\n    });\n    const { state } = useContext(Store);\n    const { userInfo } = state;\n\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                const { data } = await axios.get('/api/orders/summary', {\n                    headers: { Authorization: `Bearer ${userInfo.token}` },\n                });\n\n                dispatch({ type: 'FETCH_SUCCESS', payload: data });\n            } catch (err) {\n                dispatch({\n                    type: 'FETCH_FAIL', payload: getError(err),\n                });\n            }\n        };\n\n        fetchData();\n    }, [userInfo]);\n\n    return (\n        <div>\n            <h1>Dashboard</h1>\n            {loading ? (\n                <LoadingBox />\n            ) : error ? (\n                <MessageBox variant=\"danger\">{error}</MessageBox>\n            ) :\n                <>\n                    <Row>\n                        <Col md={4}>\n                            <Card>\n                                <Card.Body>\n                                    <Card.Title>\n                                        {summary.users && summary.users[0]\n                                            ? summary.users[0].numUsers\n                                            : 0}\n                                    </Card.Title>\n                                    <Card.Text> Users</Card.Text>\n                                </Card.Body>\n                            </Card>\n                        </Col>\n                        <Col md={4}>\n                            <Card>\n                                <Card.Body>\n                                    <Card.Title>\n                                        {summary.orders && summary.users[0]\n                                            ? summary.orders[0].numOrders\n                                            : 0}\n                                    </Card.Title>\n                                    <Card.Text> Orders </Card.Text>\n                                </Card.Body>\n                            </Card>\n                        </Col>\n                        <Col md={4}>\n                            <Card>\n                                <Card.Body>\n                                    <Card.Title>\n                                        $\n                                        {summary.orders && summary.users[0]\n                                            ? summary.orders[0].totalSales.toFixed(2)\n                                            : 0}\n                                    </Card.Title>\n                                    <Card.Text> Orders </Card.Text>\n                                </Card.Body>\n                            </Card>\n                        </Col>\n                    </Row>\n                    <div className=\"my-3\">\n                        <h2>Sales</h2>\n                        {summary.dailyOrders.length === 0 ? (\n                            <MessageBox>No Sale</MessageBox>\n                        ) : (\n                            <Chart\n                                width=\"100%\"\n                                height=\"400px\"\n                                chartType=\"AreaChart\"\n                                loader={<div>Loading Chart...</div>}\n                                data={[\n                                    ['Date', 'Sales'],\n                                    ...summary.dailyOrders.map((x) => [x._id, x.sales]),\n                                ]}\n                            ></Chart>\n                        )}\n                    </div>\n                    <div className=\"my-3\">\n                        <h2>Categories</h2>\n                        {summary.productCategories.length === 0 ? (\n                            <MessageBox>No Category</MessageBox>\n                        ) : (\n                            <Chart\n                                width=\"100%\"\n                                height=\"400px\"\n                                chartType=\"PieChart\"\n                                loader={<div>Loading Chart...</div>}\n                                data={[\n                                    ['Category', 'Products'],\n                                    ...summary.productCategories.map((x) => [x._id, x.count]),\n                                ]}\n                            ></Chart>\n                        )}\n                    </div>\n                </>\n            }\n        </div>\n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}