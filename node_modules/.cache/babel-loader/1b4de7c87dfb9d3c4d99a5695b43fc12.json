{"ast":null,"code":"import _slicedToArray from\"/Users/usamabhatti/Documents/amazona/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"/Users/usamabhatti/Documents/amazona/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/usamabhatti/Documents/amazona/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{createContext,useReducer}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";export var Store=/*#__PURE__*/createContext();var initialState={fullBox:false,userInfo:localStorage.getItem('userInfo')?JSON.parse(localStorage.getItem('userInfo')):null,cart:{cartAddError:'',cartItems:localStorage.getItem('cartItems')?JSON.parse(localStorage.getItem('cartItems')):[],shippingAddress:localStorage.getItem('shippingAddress')?JSON.parse(localStorage.getItem('shippingAddress')):{location:{}},paymentMethod:localStorage.getItem('paymentMethod')?localStorage.getItem('paymentMethod'):''}};var reducer=function reducer(state,action){switch(action.type){case'SET_FULLBOX_ON':return _objectSpread(_objectSpread({},state),{},{fullBox:true});case'SET_FULLBOX_OFF':return _objectSpread(_objectSpread({},state),{},{fullBox:false});case'CART_ADD_ITEM':// add to cart\nvar newItem=action.payload;var existItem=state.cart.cartItems.find(function(item){return item._id===newItem._id;});var cartItems=existItem?state.cart.cartItems.map(function(item){return item._id===existItem._id?newItem:item;}):[].concat(_toConsumableArray(state.cart.cartItems),[newItem]);localStorage.setItem('cartItems',JSON.stringify(cartItems));return _objectSpread(_objectSpread({},state),{},{cart:_objectSpread(_objectSpread({},state.cart),{},{cartItems:cartItems})});case'CART_REMOVE_ITEM':{var _cartItems=state.cart.cartItems.filter(function(item){return item._id!==action.payload._id;});localStorage.setItem('cartItems',JSON.stringify(_cartItems));return _objectSpread(_objectSpread({},state),{},{cart:_objectSpread(_objectSpread({},state.cart),{},{cartItems:_cartItems})});}case'CART_ADD_ITEM_FAIL':return _objectSpread(_objectSpread({},state),{},{cart:_objectSpread(_objectSpread({},state.cart),{},{cartAddError:action.payload})});case'CART_CLEAR':return _objectSpread(_objectSpread({},state),{},{cart:_objectSpread(_objectSpread({},state.cart),{},{cartItems:[]})});case'USER_SIGNIN':return _objectSpread(_objectSpread({},state),{},{userInfo:action.payload});case'USER_SIGNOUT':return _objectSpread(_objectSpread({},state),{},{userInfo:null,cart:{cartAddError:'',cartItems:[],shippingAddress:{},paymentMethod:''}});case'SAVE_SHIPPING_ADDRESS':return _objectSpread(_objectSpread({},state),{},{cart:_objectSpread(_objectSpread({},state.cart),{},{shippingAddress:action.payload})});case'SAVE_SHIPPING_ADDRESS_MAP_LOCATION':return _objectSpread(_objectSpread({},state),{},{cart:_objectSpread(_objectSpread({},state.cart),{},{shippingAddress:_objectSpread(_objectSpread({},state.cart.shippingAddress),{},{location:action.payload})})});case'SAVE_PAYMENT_METHOD':return _objectSpread(_objectSpread({},state),{},{cart:_objectSpread(_objectSpread({},state.cart),{},{paymentMethod:action.payload})});default:return state;}};export var StoreProvider=function StoreProvider(props){var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var value={state:state,dispatch:dispatch};return/*#__PURE__*/_jsx(Store.Provider,{value:value,children:props.children});};","map":{"version":3,"names":["createContext","useReducer","Store","initialState","fullBox","userInfo","localStorage","getItem","JSON","parse","cart","cartAddError","cartItems","shippingAddress","location","paymentMethod","reducer","state","action","type","newItem","payload","existItem","find","item","_id","map","setItem","stringify","filter","StoreProvider","props","dispatch","value","children"],"sources":["/Users/usamabhatti/Documents/amazona/frontend/src/Store.js"],"sourcesContent":["import { createContext, useReducer } from 'react';\n\nexport const Store = createContext();\n\nconst initialState = {\n    fullBox: false,\n    userInfo: localStorage.getItem('userInfo')\n        ? JSON.parse(localStorage.getItem('userInfo'))\n        : null,\n    cart: {\n        cartAddError: '',\n        cartItems: localStorage.getItem('cartItems')\n            ? JSON.parse(localStorage.getItem('cartItems'))\n            : [],\n        shippingAddress: localStorage.getItem('shippingAddress')\n            ? JSON.parse(localStorage.getItem('shippingAddress'))\n            : { location: {} },\n        paymentMethod: localStorage.getItem('paymentMethod')\n            ? localStorage.getItem('paymentMethod')\n            : '',\n    }\n};\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case 'SET_FULLBOX_ON':\n            return { ...state, fullBox: true };\n        case 'SET_FULLBOX_OFF':\n            return { ...state, fullBox: false };\n\n        case 'CART_ADD_ITEM':\n            // add to cart\n            const newItem = action.payload;\n            const existItem = state.cart.cartItems.find((item) => item._id === newItem._id);\n\n            const cartItems = existItem\n                ? state.cart.cartItems.map((item) =>\n                    item._id === existItem._id ? newItem : item\n                )\n                : [...state.cart.cartItems, newItem];\n\n            localStorage.setItem('cartItems', JSON.stringify(cartItems));\n\n            return { ...state, cart: { ...state.cart, cartItems } };\n        case 'CART_REMOVE_ITEM': {\n            const cartItems = state.cart.cartItems.filter((item) => item._id !== action.payload._id);\n            localStorage.setItem('cartItems', JSON.stringify(cartItems));\n\n            return { ...state, cart: { ...state.cart, cartItems } };\n        }\n        case 'CART_ADD_ITEM_FAIL':\n            return { ...state, cart: { ...state.cart, cartAddError: action.payload } };\n        case 'CART_CLEAR':\n            return { ...state, cart: { ...state.cart, cartItems: [] } };\n\n        case 'USER_SIGNIN':\n            return { ...state, userInfo: action.payload };\n        case 'USER_SIGNOUT':\n            return {\n                ...state,\n                userInfo: null,\n                cart: {\n                    cartAddError: '',\n                    cartItems: [],\n                    shippingAddress: {},\n                    paymentMethod: '',\n                }\n            };\n\n        case 'SAVE_SHIPPING_ADDRESS':\n            return { ...state, cart: { ...state.cart, shippingAddress: action.payload } };\n        case 'SAVE_SHIPPING_ADDRESS_MAP_LOCATION':\n            return {\n                ...state,\n                cart: {\n                    ...state.cart,\n                    shippingAddress: {\n                        ...state.cart.shippingAddress,\n                        location: action.payload,\n                    },\n                },\n            };\n\n        case 'SAVE_PAYMENT_METHOD':\n            return { ...state, cart: { ...state.cart, paymentMethod: action.payload } }\n\n        default:\n            return state;\n    }\n};\n\nexport const StoreProvider = (props) => {\n    const [state, dispatch] = useReducer(reducer, initialState);\n    const value = { state, dispatch };\n\n    return <Store.Provider value={value}>{props.children}</Store.Provider>\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}