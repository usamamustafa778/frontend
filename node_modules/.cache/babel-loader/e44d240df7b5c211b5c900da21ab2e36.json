{"ast":null,"code":"var _jsxFileName = \"/Users/usamabhatti/Documents/amazona/frontend/src/components/Product.js\",\n    _s = $RefreshSig$();\n\nimport Card from 'react-bootstrap/Card';\nimport Button from 'react-bootstrap/Button';\nimport { Link } from 'react-router-dom';\nimport Rating from './Rating';\nimport { useContext } from 'react';\nimport { Store } from '../Store';\nimport axios from 'axios';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Product = props => {\n  _s();\n\n  const {\n    product\n  } = props;\n  const {\n    state,\n    dispatch: ctxDispatch\n  } = useContext(Store);\n  const {\n    cart\n  } = state;\n\n  const addToCartHandler = async item => {\n    var _cart$cartItems;\n\n    ctxDispatch({\n      type: 'CART_ADD_ITEM_FAIL',\n      payload: ''\n    });\n    const existItem = (_cart$cartItems = cart.cartItems) === null || _cart$cartItems === void 0 ? void 0 : _cart$cartItems.find(x => x._id === product._id);\n    const quantity = existItem ? existItem.quantity + 1 : 1;\n    const {\n      data\n    } = await axios.get(`/api/products/${item._id}`);\n\n    if (data.countInStock < quantity) {\n      window.alert('Sorry! Product is out of stock.');\n      return;\n    }\n\n    if (cart.cartItems.length > 0 && data.seller._id !== cart.cartItems[0].seller._id) {\n      ctxDispatch({\n        type: 'CART_ADD_ITEM_FAIL',\n        payload: `Can't Add To Cart ${data.name}. Buy only from ${cart.cartItems[0].seller.seller.name} in this order`\n      });\n      return;\n    }\n\n    ctxDispatch({\n      type: 'CART_ADD_ITEM',\n      payload: { ...product,\n        quantity\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Card, {\n    className: \"product\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: `/product/${product === null || product === void 0 ? void 0 : product.slug}`,\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: product === null || product === void 0 ? void 0 : product.image,\n        className: \"card-img-top\",\n        alt: product === null || product === void 0 ? void 0 : product.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n      children: [/*#__PURE__*/_jsxDEV(Link, {\n        to: `/product/${product.slug}`,\n        children: /*#__PURE__*/_jsxDEV(Card.Title, {\n          children: product === null || product === void 0 ? void 0 : product.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Rating, {\n        rating: product === null || product === void 0 ? void 0 : product.rating,\n        numReviews: product === null || product === void 0 ? void 0 : product.numReviews\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"my-2\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Card.Text, {\n            children: [\"$\", product.price]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            to: `/seller/${product === null || product === void 0 ? void 0 : product.seller._id}`,\n            children: product.seller.seller.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this), product.countInStock === 0 ? /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"light\",\n        disabled: true,\n        children: \"Out of stock\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => addToCartHandler(product),\n        children: \"Add to cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this)]\n  }, product === null || product === void 0 ? void 0 : product.slug, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Product, \"XDbruNh/h18/KyvLzI/kuU/R8wE=\");\n\n_c = Product;\nexport default Product;\n\nvar _c;\n\n$RefreshReg$(_c, \"Product\");","map":{"version":3,"names":["Card","Button","Link","Rating","useContext","Store","axios","Row","Col","Product","props","product","state","dispatch","ctxDispatch","cart","addToCartHandler","item","type","payload","existItem","cartItems","find","x","_id","quantity","data","get","countInStock","window","alert","length","seller","name","slug","image","rating","numReviews","price"],"sources":["/Users/usamabhatti/Documents/amazona/frontend/src/components/Product.js"],"sourcesContent":["import Card from 'react-bootstrap/Card';\nimport Button from 'react-bootstrap/Button';\nimport { Link } from 'react-router-dom';\nimport Rating from './Rating';\nimport { useContext } from 'react';\nimport { Store } from '../Store';\nimport axios from 'axios';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\n\nconst Product = (props) => {\n    const { product } = props;\n\n    const { state, dispatch: ctxDispatch } = useContext(Store);\n    const { cart } = state;\n\n    const addToCartHandler = async (item) => {\n        ctxDispatch({ type: 'CART_ADD_ITEM_FAIL', payload: '' });\n\n        const existItem = cart.cartItems?.find((x => x._id === product._id));\n        const quantity = existItem ? existItem.quantity + 1 : 1;\n\n        const { data } = await axios.get(`/api/products/${item._id}`);\n\n        if (data.countInStock < quantity) {\n            window.alert('Sorry! Product is out of stock.');\n            return;\n        }\n\n        if (cart.cartItems.length > 0 && data.seller._id !== cart.cartItems[0].seller._id) {\n            ctxDispatch({\n                type: 'CART_ADD_ITEM_FAIL',\n                payload: `Can't Add To Cart ${data.name}. Buy only from ${cart.cartItems[0].seller.seller.name} in this order`,\n            });\n            return;\n        }\n\n        ctxDispatch({ type: 'CART_ADD_ITEM', payload: { ...product, quantity } });\n    };\n\n    return (\n        <Card className=\"product\" key={product?.slug}>\n            <Link to={`/product/${product?.slug}`}>\n                <img src={product?.image} className=\"card-img-top\" alt={product?.name} />\n            </Link>\n            <Card.Body>\n                <Link to={`/product/${product.slug}`}>\n                    <Card.Title>{product?.name}</Card.Title>\n                </Link>\n                <Rating rating={product?.rating} numReviews={product?.numReviews} />\n                <Row className='my-2'>\n                    <Col>\n                        <Card.Text>${product.price}</Card.Text>\n                    </Col>\n                    <Col>\n                        <Link to={`/seller/${product?.seller._id}`}>\n                            {product.seller.seller.name}\n                        </Link>\n                    </Col>\n                </Row>\n                {product.countInStock === 0 ? (\n                    <Button variant=\"light\" disabled>\n                        Out of stock\n                    </Button>\n                ) : (\n                    <Button onClick={() => addToCartHandler(product)}>Add to cart</Button>\n                )}\n            </Card.Body>\n        </Card>\n    );\n};\n\nexport default Product;"],"mappings":"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"},"metadata":{},"sourceType":"module"}