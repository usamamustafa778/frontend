{"ast":null,"code":"import _asyncToGenerator from\"/Users/usamabhatti/Documents/amazona/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/usamabhatti/Documents/amazona/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"/Users/usamabhatti/Documents/amazona/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/usamabhatti/Documents/amazona/frontend/node_modules/@babel/runtime/regenerator/index.js\";import axios from'axios';import React,{useEffect,useReducer}from'react';import Badge from'react-bootstrap/Badge';import Card from'react-bootstrap/Card';import Col from'react-bootstrap/Col';import Row from'react-bootstrap/Row';import ListGroup from'react-bootstrap/ListGroup';import{useParams}from'react-router-dom';import LoadingBox from'../components/LoadingBox';import MessageBox from'../components/MessageBox';import Product from'../components/Product';import Rating from'../components/Rating';import{getError}from'../utils';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var reducer=function reducer(state,action){switch(action.type){case'FETCH_REQUEST':return _objectSpread(_objectSpread({},state),{},{loading:true});case'FETCH_SUCCESS':return _objectSpread(_objectSpread({},state),{},{products:action.payload,loading:false});case'FETCH_FAIL':return _objectSpread(_objectSpread({},state),{},{error:action.payload,loading:false});case'FETCH_SELLER_REQUEST':return _objectSpread(_objectSpread({},state),{},{loadingSeller:true});case'FETCH_SELLER_SUCCESS':return _objectSpread(_objectSpread({},state),{},{user:action.payload,loadingSeller:false});case'FETCH_SELLER_FAIL':return _objectSpread(_objectSpread({},state),{},{error:action.payload,loadingSeller:false});default:return state;}};export default function SellerScreen(props){var _user$seller,_user$seller2,_user$seller3,_user$seller4,_user$seller5;var _useReducer=useReducer(reducer,{products:[],user:{},loading:true,error:''}),_useReducer2=_slicedToArray(_useReducer,2),_useReducer2$=_useReducer2[0],loading=_useReducer2$.loading,error=_useReducer2$.error,products=_useReducer2$.products,loadingSeller=_useReducer2$.loadingSeller,user=_useReducer2$.user,dispatch=_useReducer2[1];var params=useParams();var sellerId=params.id;useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result,_user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatch({type:'FETCH_REQUEST'});_context.next=4;return axios.get(\"/api/products?seller=\".concat(sellerId));case 4:result=_context.sent;dispatch({type:'FETCH_SUCCESS',payload:result.data});dispatch({type:'FETCH_SELLER_REQUEST'});_context.next=9;return axios.get(\"/api/users/seller/\".concat(sellerId));case 9:_user=_context.sent;dispatch({type:'FETCH_SELLER_SUCCESS',payload:_user.data});_context.next=17;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](0);dispatch({type:'FETCH_FAIL',payload:getError(_context.t0)});dispatch({type:'FETCH_SELLER_FAIL',payload:getError(_context.t0)});case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,13]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[sellerId]);console.log(user.seller);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:3,children:loadingSeller?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(Row,{children:/*#__PURE__*/_jsx(Card.Img,{className:\"thumbnail\",src:user===null||user===void 0?void 0:(_user$seller=user.seller)===null||_user$seller===void 0?void 0:_user$seller.logo,alt:user===null||user===void 0?void 0:(_user$seller2=user.seller)===null||_user$seller2===void 0?void 0:_user$seller2.name})})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Rating,{rating:user===null||user===void 0?void 0:(_user$seller3=user.seller)===null||_user$seller3===void 0?void 0:_user$seller3.rating,numReviews:user===null||user===void 0?void 0:(_user$seller4=user.seller)===null||_user$seller4===void 0?void 0:_user$seller4.numReviews})})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{children:user===null||user===void 0?void 0:(_user$seller5=user.seller)===null||_user$seller5===void 0?void 0:_user$seller5.name}),/*#__PURE__*/_jsx(Col,{children:/*#__PURE__*/_jsxs(Badge,{bg:\"danger\",children:[\" \",/*#__PURE__*/_jsx(\"a\",{className:\"text-decoration-none text-white\",href:\"mailto:\".concat(user===null||user===void 0?void 0:user.email),children:\"Contact Seller\"})]})})]})})]})})})}),/*#__PURE__*/_jsx(Col,{md:9,children:/*#__PURE__*/_jsx(Row,{children:loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(_Fragment,{children:[products.length===0&&/*#__PURE__*/_jsx(MessageBox,{children:\"No Product Found\"}),products.map(function(product){return/*#__PURE__*/_jsx(Col,{xs:6,md:4,lg:4,className:\"mb-3\",children:/*#__PURE__*/_jsx(Product,{product:product},product._id)},product.slug);})]})})})]})});}","map":{"version":3,"names":["axios","React","useEffect","useReducer","Badge","Card","Col","Row","ListGroup","useParams","LoadingBox","MessageBox","Product","Rating","getError","reducer","state","action","type","loading","products","payload","error","loadingSeller","user","SellerScreen","props","dispatch","params","sellerId","id","fetchData","get","result","data","console","log","seller","logo","name","rating","numReviews","email","length","map","product","_id","slug"],"sources":["/Users/usamabhatti/Documents/amazona/frontend/src/screens/SellerScreen.js"],"sourcesContent":["import axios from 'axios';\nimport React, { useEffect, useReducer } from 'react';\nimport Badge from 'react-bootstrap/Badge';\nimport Card from 'react-bootstrap/Card';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport ListGroup from 'react-bootstrap/ListGroup';\nimport { useParams } from 'react-router-dom';\nimport LoadingBox from '../components/LoadingBox';\nimport MessageBox from '../components/MessageBox';\nimport Product from '../components/Product';\nimport Rating from '../components/Rating';\nimport { getError } from '../utils';\n\nconst reducer = (state, action) => {\n    switch (action.type) {\n        case 'FETCH_REQUEST':\n            return { ...state, loading: true };\n        case 'FETCH_SUCCESS':\n            return { ...state, products: action.payload, loading: false };\n        case 'FETCH_FAIL':\n            return { ...state, error: action.payload, loading: false };\n        case 'FETCH_SELLER_REQUEST':\n            return { ...state, loadingSeller: true };\n        case 'FETCH_SELLER_SUCCESS':\n            return { ...state, user: action.payload, loadingSeller: false };\n        case 'FETCH_SELLER_FAIL':\n            return { ...state, error: action.payload, loadingSeller: false };\n\n        default:\n            return state;\n    }\n};\n\nexport default function SellerScreen(props) {\n    const [{ loading, error, products, loadingSeller, user }, dispatch] = useReducer(reducer, {\n        products: [],\n        user: {},\n        loading: true,\n        error: '',\n    });\n\n    const params = useParams();\n    const { id: sellerId } = params;\n\n    useEffect(() => {\n        const fetchData = async () => {\n            try {\n                dispatch({ type: 'FETCH_REQUEST' });\n                const result = await axios.get(`/api/products?seller=${sellerId}`);\n                dispatch({ type: 'FETCH_SUCCESS', payload: result.data });\n\n                dispatch({ type: 'FETCH_SELLER_REQUEST' });\n                const user = await axios.get(`/api/users/seller/${sellerId}`);\n                dispatch({ type: 'FETCH_SELLER_SUCCESS', payload: user.data });\n            } catch (err) {\n                dispatch({ type: 'FETCH_FAIL', payload: getError(err) });\n                dispatch({ type: 'FETCH_SELLER_FAIL', payload: getError(err) });\n            }\n        };\n        fetchData();\n    }, [sellerId]);\n\n    console.log(user.seller)\n\n    return (\n        <>\n            <Row>\n                <Col md={3}>\n                    {loadingSeller ? (\n                        <LoadingBox />\n                    ) : error ? (\n                        <MessageBox variant=\"danger\">{error}</MessageBox>\n                    ) : (\n                        <Card>\n                            <Card.Body>\n                                <ListGroup variant=\"flush\">\n                                    <ListGroup.Item>\n                                        <Row>\n                                            <Card.Img\n                                                className=\"thumbnail\"\n                                                src={user?.seller?.logo}\n                                                alt={user?.seller?.name}\n                                            />\n                                        </Row>\n                                    </ListGroup.Item>\n                                    <ListGroup.Item>\n                                        <div className=\"d-grid\">\n                                            <Rating\n                                                rating={user?.seller?.rating}\n                                                numReviews={user?.seller?.numReviews}\n                                            ></Rating>\n                                        </div>\n                                    </ListGroup.Item>\n                                    <ListGroup.Item>\n                                        <Row>\n                                            <Col>{user?.seller?.name}</Col>\n                                            <Col>\n                                                <Badge bg=\"danger\"> <a className=\"text-decoration-none text-white\" href={`mailto:${user?.email}`}>Contact Seller</a></Badge>\n                                            </Col>\n                                        </Row>\n                                    </ListGroup.Item>\n                                </ListGroup>\n                            </Card.Body>\n                        </Card>\n                    )}\n                </Col>\n                <Col md={9}>\n                    <Row>\n                        {loading ? (\n                            <LoadingBox></LoadingBox>\n                        ) : error ? (\n                            <MessageBox variant=\"danger\">{error}</MessageBox>\n                        ) : (\n                            <>\n                                {products.length === 0 && <MessageBox>No Product Found</MessageBox>}\n                                {products.map((product) => (\n                                    <Col xs={6} md={4} lg={4} key={product.slug} className=\"mb-3\">\n                                        <Product key={product._id} product={product}></Product>\n                                    </Col>\n\n                                ))}\n                            </>\n                        )}\n                    </Row>\n                </Col>\n            </Row >\n        </>\n    );\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}